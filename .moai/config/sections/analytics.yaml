# Analytics Configuration
# MoAI-ADK Analytics Configuration

analytics:
  # Complaint Trend Analysis Settings
  complaint_analysis:
    # Minimum data points for reliable baseline calculation
    min_data_points: 100

    # Control limit multiplier for statistical process control
    # 2 = 95.4% confidence interval, 3 = 99.7% confidence interval
    control_limit_multiplier: 2

    # Default aggregation period (day, week, month, quarter)
    default_period: month

    # Anomaly severity thresholds (in standard deviations)
    severity_thresholds:
      medium: 2.0
      high: 3.0

    # Enable synthetic data generation for testing
    synthetic_data_enabled: true

    # Confidence score calculation
    confidence:
      # Minimum data points for high confidence
      high_confidence_threshold: 12

      # Medium confidence range
      medium_confidence_min: 6
      medium_confidence_max: 11

    # Alert settings
    alerts:
      # Enable automatic alert generation
      enabled: true

      # Alert channels (console, email, notion, slack)
      channels:
        - console

      # Minimum severity for alerts (medium, high)
      min_severity: medium

      # Include correlation analysis in alerts
      include_correlation: true

      # Include geographical cluster analysis
      include_geography: true

    # Correlation analysis settings
    correlation:
      # Minimum complaint count for lot correlation
      lot_threshold: 2

      # Minimum complaint count for geographical cluster
      geography_threshold: 1

      # Complaint types to analyze
      types_to_analyze:
        - Software Crash
        - UI Issue
        - Performance
        - Data Loss
        - Connectivity
        - Hardware Failure
        - Battery Issue

  # Knowledge Base Settings
  knowledge_base:
    # Storage location
    path: .claude/agent-memory/knowledge-base.json

    # Storage backend (json, notion, hybrid)
    storage_backend: json

    # Search settings
    search:
      # Maximum entries to return in search
      max_results: 10

      # Minimum relevance score threshold (0-1)
      min_relevance_score: 0.3

      # Outcome priority boost
      outcome_boost:
        approved: 0.5
        approvable: 0.2
        not_approved: -0.3
        pending: 0.0

    # Content reuse settings
    reuse:
      # Require explicit confirmation for failed outcomes
      require_confirmation_failed: true

      # Require context validation
      require_validation: true

      # Warning types that block reuse
      blocking_warnings:
        - failed_outcome
        - regulation_change

    # Quality indicators
    quality:
      # Enable usage tracking
      track_usage: true

      # Enable user ratings
      enable_ratings: true

      # Minimum reuse count for "proven" status
      proven_threshold: 5

      # Minimum success rate for "reliable" status
      reliable_threshold: 0.8

  # MCP Integration Settings
  mcp_integration:
    # Context7 MCP settings
    context7:
      # Enable Context7 for regulation lookup
      enabled: true

      # Cache duration in hours
      cache_duration: 24

      # Resolve library IDs for regulations
      resolve_library_ids: true

  # Performance Settings
  performance:
    # Enable caching
    caching_enabled: true

    # Cache size limits
    cache_size_mb: 100

    # Async operations
    async_enabled: true

    # Batch processing
    batch_size: 100

    # Timeout settings (seconds)
    timeouts:
      web_search: 30
      context7_lookup: 10
      knowledge_base_search: 5

  # Logging Settings
  logging:
    # Enable analytics logging
    enabled: true

    # Log level (debug, info, warn, error)
    level: info

    # Log file path
    file: .moai/logs/analytics.log

    # Log format
    format: json

  # Testing Settings
  testing:
    # Enable test mode with synthetic data
    synthetic_data_mode: false

    # Synthetic data parameters
    synthetic:
      num_complaints: 150
      anomaly_multiplier: 2.0
      date_range_months: 3

    # Integration test settings
    integration:
      # Run integration tests on startup
      run_on_startup: false

      # Test data location
      test_data_path: .claude/tests/analytics/

  # Security Settings
  security:
    # Sanitize complaint data for PII
    sanitize_pii: true

    # Encryption for stored data
    encrypt_storage: false

    # Access control
    access_log_enabled: true
